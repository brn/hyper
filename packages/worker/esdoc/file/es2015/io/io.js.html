<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../../">
  <title data-ice="title">es2015/io/io.js | API Document</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  
  
  <script src="script/manual.js"></script>
</head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <a data-ice="repoURL" href="https://github.com/brn/react-mvi" class="repo-url-github">Repository</a>
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getProcess">getProcess</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-run">run</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-runner">runner</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isDefined">isDefined</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">component</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/es2015/component/context.js~Context.html">Context</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/es2015/component/subscriber.js~Subscriber.html">Subscriber</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-context">context</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-setContext">setContext</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-component">component</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-ContextReactTypes">ContextReactTypes</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-SUBSCRIBER_MARK">SUBSCRIBER_MARK</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-Tags">Tags</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">di</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/es2015/di/abstract-module.js~AbstractModule.html">AbstractModule</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/es2015/di/binding.js~BindingPlaceholder.html">BindingPlaceholder</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/es2015/di/binding.js~ClassTypeOption.html">ClassTypeOption</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/es2015/di/binding.js~InterceptPlaceholder.html">InterceptPlaceholder</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/es2015/di/binding.js~TemplatePlaceholder.html">TemplatePlaceholder</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/es2015/di/injector.js~Injector.html">Injector</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/es2015/di/method-proxy.js~MethodInvocation.html">MethodInvocation</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-createModule">createModule</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-inject">inject</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-param">param</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-intercept">intercept</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-interceptAll">interceptAll</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-dynamicTargetSymbol">dynamicTargetSymbol</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-injectionTargetSymbol">injectionTargetSymbol</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-INJECTION_NAME_SYMBOL">INJECTION_NAME_SYMBOL</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">io</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/es2015/io/io.js~IOModule.html">IOModule</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/es2015/io/io.js~IOResponse.html">IOResponse</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/es2015/io/io.js~SubjectStore.html">SubjectStore</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-io">io</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-IO_MARK">IO_MARK</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-appendIOModuleKey">appendIOModuleKey</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-getIOModules">getIOModules</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">shims</div><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-Symbol">Symbol</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">es2015/io/io.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">// -*- mode: typescript -*-
/**
 * The MIT License (MIT)
 * Copyright (c) Taketoshi Aono
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the &quot;Software&quot;),
 * to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense,
 * and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * @fileoverview
 * @author Taketoshi Aono
 */
import { Subject } from &apos;rxjs/Subject&apos;;
import { Symbol } from &apos;../shims/symbol&apos;;
import { _ } from &apos;../shims/lodash&apos;;
export const IO_MARK = Symbol(&apos;io&apos;);
/**
 * Base class of io module.
 */
export class IOModule {
    constructor() {
        this[IO_MARK] = true;
    }
}
/**
 * Decorator for io module.
 */
export function io(target) {
    target[IO_MARK] = true;
}
const IO_MODULES = [&apos;http&apos;, &apos;event&apos;, &apos;storage&apos;];
export const appendIOModuleKey = (name) =&gt; {
    if (IO_MODULES.indexOf(name) === -1) {
        IO_MODULES.push(name);
        return;
    }
    throw new Error(`${name} is already registered as io module.`);
};
export const getIOModules = () =&gt; IO_MODULES.slice();
/**
 * Represent IO response.
 */
export class IOResponse {
    constructor(subjectStore) {
        this.subjectStore = subjectStore;
    }
    ;
    /**
     * Get a subject by specify key.
     * @param key Subject name.
     * @returns Registered Subject.
     */
    for(key) {
        if (!this.subjectStore.hasWithoutGlobal(key)) {
            return this.subjectStore.add(key);
        }
        return this.subjectStore.getWithoutGlobal(key);
    }
}
/**
 * Hold Subject cache.
 */
export class SubjectStore {
    constructor(subjectMap = {}) {
        this.subjectMap = subjectMap;
    }
    hasWithoutGlobal(key) {
        return !!this.subjectMap[key];
    }
    /**
     * Check whether Subject was defined with specific key or not.
     * @param key Subject name.
     * @return True if Subject was defined.
     */
    has(key) {
        const splited = key.split(&apos;::&apos;);
        const globalKey = splited.length &gt; 1 ? `*::${splited[1]}` : null;
        return this.subjectMap[key] || (globalKey ? this.subjectMap[globalKey] : false);
    }
    getWithoutGlobal(key) {
        if (this.subjectMap[key]) {
            return this.subjectMap[key];
        }
        return null;
    }
    /**
     * Get Subject by specific key.
     * @param key Subject name.
     * @returns Registered Subject.
     */
    get(key) {
        const ret = [];
        const splited = key.split(&apos;::&apos;);
        const globalKey = splited.length &gt; 1 ? `*::${splited[1]}` : null;
        const globalBus = globalKey &amp;&amp; this.subjectMap[globalKey] ? this.subjectMap[globalKey] : null;
        if (this.subjectMap[key]) {
            ret.push(this.subjectMap[key]);
        }
        if (globalBus) {
            ret.push(globalBus);
        }
        return ret;
    }
    /**
     * Append new Subject.
     * @param key Subject name.
     * @returns Registered Subject.
     */
    add(key) {
        return this.subjectMap[key] = new Subject();
    }
    /**
     * Dispose all subscriptions.
     */
    end() {
        _.forEach(this.subjectMap, (v) =&gt; v.complete());
    }
}
/**
 * The methods of the Http request.
 */
export var HttpMethod;
(function (HttpMethod) {
    HttpMethod[HttpMethod[&quot;GET&quot;] = 1] = &quot;GET&quot;;
    HttpMethod[HttpMethod[&quot;POST&quot;] = 2] = &quot;POST&quot;;
    HttpMethod[HttpMethod[&quot;PUT&quot;] = 3] = &quot;PUT&quot;;
})(HttpMethod || (HttpMethod = {}));
/**
 * Response type of the Http request.
 */
export var ResponseType;
(function (ResponseType) {
    ResponseType[ResponseType[&quot;JSON&quot;] = 1] = &quot;JSON&quot;;
    ResponseType[ResponseType[&quot;BLOB&quot;] = 2] = &quot;BLOB&quot;;
    ResponseType[ResponseType[&quot;ARRAY_BUFFER&quot;] = 3] = &quot;ARRAY_BUFFER&quot;;
    ResponseType[ResponseType[&quot;FORM_DATA&quot;] = 4] = &quot;FORM_DATA&quot;;
    ResponseType[ResponseType[&quot;TEXT&quot;] = 5] = &quot;TEXT&quot;;
})(ResponseType || (ResponseType = {}));
/**
 * The methods of the StorageIO.
 */
export var StorageMethod;
(function (StorageMethod) {
    StorageMethod[StorageMethod[&quot;PUT&quot;] = 1] = &quot;PUT&quot;;
    StorageMethod[StorageMethod[&quot;GET&quot;] = 2] = &quot;GET&quot;;
    StorageMethod[StorageMethod[&quot;DEL&quot;] = 3] = &quot;DEL&quot;;
})(StorageMethod || (StorageMethod = {}));
/**
 * The type of the Storage.
 */
export var StorageType;
(function (StorageType) {
    StorageType[StorageType[&quot;LOCAL_STORAGE&quot;] = 1] = &quot;LOCAL_STORAGE&quot;;
    StorageType[StorageType[&quot;SESSION_STORAGE&quot;] = 2] = &quot;SESSION_STORAGE&quot;;
    StorageType[StorageType[&quot;COOKIE&quot;] = 3] = &quot;COOKIE&quot;;
})(StorageType || (StorageType = {}));
;
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.4.7)</span></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
