this.ReactMVI=this.ReactMVI||{},this.ReactMVI.testing=function(t,n,e){"use strict";function r(t,n){for(var e in n)t[e]=n[e];return t}var o=r(function(t,n,e){return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var i;try{t.apply(void 0,r)}catch(t){i=t}finally{e&&e(),n(i)}}},{run:function(t,n,e){return o(t,n,e)()}}),i=r(function(t,n,e){return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];try{return t.apply(void 0,r)}catch(t){e&&e(),n(t)}}},{run:function(t,n,e){return i(t,n,e)()}}),c=function(){function t(t,n){this.time=t,this.cb=n,this.current=0}return t.prototype.notify=function(){++this.current===this.time&&this.cb()},t}(),u=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++){n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},a=function(t){return"function"==typeof Symbol?Symbol(t):"@@"+t},f=a("ReactMVIMockedIntentState"),s=a("ReactMVIMockedIntentSubject"),p=function(){for(var t=Object.getOwnPropertyNames(Object.prototype),n=Object.create(null),e=0,r=t.length;e<r;e++)n[t[e]]=!0;return n.constructor=!0,n}(),h=function(){function t(n,e){var r=this;this[s]={},this[f]=e;for(var o=n;o&&o!==Object.prototype;)Object.getOwnPropertyNames(o).forEach(function(n){if(!r[n]&&!p[n]){var e=Object.getOwnPropertyDescriptor(o,n);if(e)if("function"==typeof e.get){var i=u({},e);i.get=t.proxify(r,n),Object.defineProperty(r,n,i)}else"function"==typeof e.value&&(r[n]=t.proxify(r,n))}}),o=o.__proto__}return t.proxify=function(t,n){return t[s][n]=new e.Subject,function(){return t[s][n].share()}},t}(),y=function(){function t(t){this.mocker=t}return t.prototype.send=function(n,e){void 0===e&&(e={}),t.send(this.mocker,n,e)},t.send=function(t,n,e){if(void 0===e&&(e={}),!t[s][n])throw new Error("$[name} is not valid property name.");t[s][n].next({data:e,state:t[f]})},t}();t.graceful=o,t.nothing=function(t,n){return function(){return n&&n(),t()}},t.stopOnError=i,t.Joiner=c,t.prepareTest=function(t,e,r){void 0===r&&(r={state:{}}),r&&r.handlers&&n.registerHandlers(r.handlers);var o={state:r.state,__intent:null},i=new n.Provisioning(o,t,e,r.services||{},function(t){return new h(t,r.state)});return i.prepare(),{store:i.getStores()[0],stores:i.getStores(),mock:new y(i.getIntentInstance())}},t.Mocker=h,t.MockManipulator=y}({},ReactMVI,Rx);
