var ReactMVI=function(t,n,e){"use strict";function r(t,n){function e(){this.constructor=t}lt(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}function o(t){return"function"==typeof t}function i(t){setTimeout(function(){throw t})}function s(t){return null!=t&&"object"==typeof t}function u(){try{return ft.apply(this,arguments)}catch(t){return mt.e=t,mt}}function c(t){return ft=t,u}function a(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(t,n){return n+1+") "+t.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}function p(t){return t.reduce(function(t,n){return t.concat(n instanceof _t?n.errors:n)},[])}function h(t){for(;t;){var n=t,e=n.closed,r=n.destination,o=n.isStopped;if(e||o)return!1;t=r&&r instanceof St?r:null}return!0}function f(t,n,e){if(t){if(t instanceof St)return t;if(t[gt])return t[gt]()}return t||n||e?new St(t,n,e):new St(yt)}function l(){}function d(t){return t?1===t.length?t[0]:function(n){return t.reduce(function(t,n){return n(t)},n)}:l}function b(t){if(t||(t=bt.Promise||Promise),!t)throw new Error("no Promise impl found");return t}function y(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}function v(){return function(t){return t.lift(new Nt(t))}}function m(t){return t?_(t):Rt}function _(t){return new xt(function(n){return t.schedule(function(){return n.complete()})})}function w(t){return t&&"function"==typeof t.schedule}function g(t,n){return new xt(n?function(e){var r=new wt,o=0;return r.add(n.schedule(function(){o!==t.length?(e.next(t[o++]),e.closed||r.add(this.schedule())):e.complete()})),r}:Mt(t))}function S(t){var n=new xt(function(n){n.next(t),n.complete()});return n._isScalar=!0,n.value=t,n}function E(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var e=t[t.length-1];switch(w(e)?t.pop():e=void 0,t.length){case 0:return m(e);case 1:return e?g(t,e):S(t[0]);default:return g(t,e)}}function j(t){return t}function x(t){return!!t&&(t instanceof xt||"function"==typeof t.lift&&"function"==typeof t.subscribe)}function T(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}function O(t,n){return function(e){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return e.lift(new Vt(t,n))}}function P(t){return t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}function C(t,n,e,r,o){if(void 0===o&&(o=new Ut(t,e,r)),!o.closed)return Xt(n)(o)}function I(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var e=null,r=null;return w(t[t.length-1])&&(r=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&vt(t[0])&&(t=t[0]),g(t,r).lift(new qt(e))}function N(t){return t&&"function"==typeof t[jt]}function A(t){return t&&"function"==typeof t[Lt]}function H(t,n){return new xt(n?function(e){var r=new wt;return r.add(n.schedule(function(){return t.then(function(t){r.add(n.schedule(function(){e.next(t),r.add(n.schedule(function(){return e.complete()}))}))},function(t){r.add(n.schedule(function(){return e.error(t)}))})})),r}:Wt(t))}function k(t,n){if(!t)throw new Error("Iterable cannot be null");return new xt(n?function(e){var r,o=new wt;return o.add(function(){r&&"function"==typeof r.return&&r.return()}),o.add(n.schedule(function(){r=t[Lt](),o.add(n.schedule(function(){if(!e.closed){var t,n;try{var o=r.next();t=o.value,n=o.done}catch(t){return void e.error(t)}n?e.complete():(e.next(t),this.schedule())}}))})),o}:Gt(t))}function D(t,n){return new xt(n?function(e){var r=new wt;return r.add(n.schedule(function(){var o=t[jt]();r.add(o.subscribe({next:function(t){r.add(n.schedule(function(){return e.next(t)}))},error:function(t){r.add(n.schedule(function(){return e.error(t)}))},complete:function(){r.add(n.schedule(function(){return e.complete()}))}}))})),r}:zt(t))}function R(t,n){if(!n)return t instanceof xt?t:new xt(Xt(t));if(null!=t){if(N(t))return D(t,n);if(P(t))return H(t,n);if(Jt(t))return g(t,n);if(A(t)||"string"==typeof t)return k(t,n)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}function M(t,n,e){return void 0===e&&(e=Number.POSITIVE_INFINITY),"function"==typeof n?function(r){return r.pipe(M(function(e,r){return R(t(e,r)).pipe(O(function(t,o){return n(e,t,r,o)}))},e))}:("number"==typeof n&&(e=n),function(n){return n.lift(new Qt(t,e))})}function V(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),M(j,t)}function Y(){return V(1)}function F(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return 1===t.length||2===t.length&&w(t[1])?R(t[0]):Y()(E.apply(void 0,t))}function U(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var e=Number.POSITIVE_INFINITY,r=null,o=t[t.length-1];return w(o)?(r=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof o&&(e=t.pop()),null===r&&1===t.length&&t[0]instanceof xt?t[0]:V(e)(g(t,r))}function W(t){return"function"==typeof Symbol?Symbol(t):t}function L(t){return void 0!==t&&null!==t}function G(t,n){for(var e in n)t[e]=n[e];return t}function z(t,n){var e={},r="string"==typeof n?[n]:n;for(var o in t)-1===r.indexOf(o)&&(e[o]=t[o]);return e}function J(t,n){for(var e in t||{})n(t[e],e,t)}function X(t){return"Object"===nn(t)}function K(t){return X(t)&&t.constructor===Object&&!t[en]}function q(t){return"Array"===nn(t)}function B(t,n){if(q(t))return t.every(n);if(X(t))for(var e in t||{})if(!n(t[e],e,t))return!1;return!0}function Q(t,n){var e={};for(var r in t||{})e[r]=n(t[r],r,t);return e}function $(t,e){if(t===e)return t;var r=n.isValidElement(t),o=n.isValidElement(e);if(r||o)return e;if(K(t)&&K(e)){var i=Zt({},t);return Object.keys(e).forEach(function(t){K(e[t])?(t in i||(i[t]={}),i[t]=$(i[t],e[t])):i[t]=e[t]}),i}return e}function Z(){return an}function tt(t,n){return function(e){var r;if(r="function"==typeof t?t:function(){return t},"function"==typeof n)return e.lift(new ln(r,n));var o=Object.create(e,kt);return o.source=e,o.subjectFactory=r,o}}function nt(){return new Ct}function et(){return function(t){return v()(tt(nt)(t))}}function rt(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return function(n){var e=t[t.length-1];w(e)?t.pop():e=null;var r=t.length;return 1!==r||e?r>0?F(g(t,e),n):F(m(e),n):F(S(t[0]),n)}}function ot(t){return"[object Object]"===Object.prototype.toString.call(t)&&t.constructor===Object}function it(t,n){return void 0===n&&(n=!0),(new bn).collect(t,n)}function st(t,n){var e=function(e,r){t.push(e,r),n.notify({type:e,payload:r})};return e.callback=function(t,n,r){return void 0===r&&(r=!1),function(o){return e(t,r?n:void 0!==o?o:n)}},e}function ut(){return!!window.__REDUX_DEVTOOLS_EXTENSION__&&"production"!==process.env.NODE_ENV}function ct(t){var n=t.name,e=t.instanceId;return ut()?_n[e]?_n[e]:_n[e]=window.devToolsExtension.connect({maxAge:20,name:n,instanceId:e,features:{skip:!1},serialize:{options:{undefined:!0},replacer:function(t,n){return n===window?"[object Window]":n&&n.type&&n.target&&n.preventDefault?{type:n.type}:n}}}):new mn}function at(t,n){return wn(this,void 0,void 0,function(){var e,r;return gn(this,function(o){switch(o.label){case 0:return t instanceof xt?(e=n,[4,new Promise(function(n){var e=t.subscribe(function(t){e.unsubscribe(),at(t,n)})})]):[3,2];case 1:return e.apply(void 0,[o.sent()]),[3,6];case 2:return Sn(t)?(r=at,[4,t]):[3,5];case 3:return[4,r.apply(void 0,[o.sent(),n])];case 4:return o.sent(),[3,6];case 5:L(t)&&n(t),o.label=6;case 6:return[2]}})})}function pt(t,n,e){var r=this;return function(o){return xt.create(function(i){var s,u,c,a=n,p=!1,h=new jn;return e&&(u=e.bufferingConfig),at(n||{},function(n){s=o.subscribe(function(n){return wn(r,void 0,void 0,function(){var e,r,o=this;return gn(this,function(s){return e=0,u&&(e=u(n)),r=function(n){return wn(o,void 0,void 0,function(){var o;return gn(this,function(s){switch(s.label){case 0:return(o=t(a,n))?[4,at(o,function(t){if(En(t))return r(t);a=t,p||(u?e?(p=!0,c=setTimeout(function(){p=!1,i.next(a)},e)):(clearTimeout(c),i.next(t)):i.next(t))})]:[2];case 1:return s.sent(),[2]}})})},h.try(function(){return wn(o,void 0,void 0,function(){return gn(this,function(t){return[2,r(n)]})})}),[2]})})})}),function(){return s&&s.unsubscribe()}})}}function ht(){return"AnonymousProvider"}var ft,lt=function(t,n){return(lt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)},dt=!1,bt={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack,dt=t},get useDeprecatedSynchronousErrorHandling(){return dt}},yt={closed:!0,next:function(t){},error:function(t){if(bt.useDeprecatedSynchronousErrorHandling)throw t;i(t)},complete:function(){}},vt=Array.isArray||function(t){return t&&"number"==typeof t.length},mt={e:{}};a.prototype=Object.create(Error.prototype);var _t=a,wt=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var t,n=!1;if(!this.closed){var e=this,r=e._parent,i=e._parents,u=e._unsubscribe,a=e._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var h=-1,f=i?i.length:0;r;)r.remove(this),r=++h<f&&i[h]||null;if(o(u)&&(d=c(u).call(this))===mt&&(n=!0,t=t||(mt.e instanceof _t?p(mt.e.errors):[mt.e])),vt(a))for(h=-1,f=a.length;++h<f;){var l=a[h];if(s(l)){var d=c(l.unsubscribe).call(l);if(d===mt){n=!0,t=t||[];var b=mt.e;b instanceof _t?t=t.concat(p(b.errors)):t.push(b)}}}if(n)throw new _t(t)}},t.prototype.add=function(n){if(!n||n===t.EMPTY)return t.EMPTY;if(n===this)return this;var e=n;switch(typeof n){case"function":e=new t(n);case"object":if(e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if("function"!=typeof e._addParent){var r=e;(e=new t)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+n+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(e),e._addParent(this),e},t.prototype.remove=function(t){var n=this._subscriptions;if(n){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}},t.prototype._addParent=function(t){var n=this,e=n._parent,r=n._parents;e&&e!==t?r?-1===r.indexOf(t)&&r.push(t):this._parents=[t]:this._parent=t},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}(),gt="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),St=function(t){function n(e,r,o){var i=t.call(this)||this;switch(i.syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,i._parentSubscription=null,arguments.length){case 0:i.destination=yt;break;case 1:if(!e){i.destination=yt;break}if("object"==typeof e){e instanceof n?(i.syncErrorThrowable=e.syncErrorThrowable,i.destination=e,e.add(i)):(i.syncErrorThrowable=!0,i.destination=new Et(i,e));break}default:i.syncErrorThrowable=!0,i.destination=new Et(i,e,r,o)}return i}return r(n,t),n.prototype[gt]=function(){return this},n.create=function(t,e,r){var o=new n(t,e,r);return o.syncErrorThrowable=!1,o},n.prototype.next=function(t){this.isStopped||this._next(t)},n.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},n.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},n.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},n.prototype._next=function(t){this.destination.next(t)},n.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},n.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},n.prototype._unsubscribeAndRecycle=function(){var t=this,n=t._parent,e=t._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=n,this._parents=e,this._parentSubscription=null,this},n}(wt),Et=function(t){function n(n,e,r,i){var s=t.call(this)||this;s._parentSubscriber=n;var u,c=s;return o(e)?u=e:e&&(u=e.next,r=e.error,i=e.complete,e!==yt&&(o((c=Object.create(e)).unsubscribe)&&s.add(c.unsubscribe.bind(c)),c.unsubscribe=s.unsubscribe.bind(s))),s._context=c,s._next=u,s._error=r,s._complete=i,s}return r(n,t),n.prototype.next=function(t){if(!this.isStopped&&this._next){var n=this._parentSubscriber;bt.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable?this.__tryOrSetError(n,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},n.prototype.error=function(t){if(!this.isStopped){var n=this._parentSubscriber,e=bt.useDeprecatedSynchronousErrorHandling;if(this._error)e&&n.syncErrorThrowable?(this.__tryOrSetError(n,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(n.syncErrorThrowable)e?(n.syncErrorValue=t,n.syncErrorThrown=!0):i(t),this.unsubscribe();else{if(this.unsubscribe(),e)throw t;i(t)}}},n.prototype.complete=function(){var t=this;if(!this.isStopped){var n=this._parentSubscriber;if(this._complete){var e=function(){return t._complete.call(t._context)};bt.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable?(this.__tryOrSetError(n,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}},n.prototype.__tryOrUnsub=function(t,n){try{t.call(this._context,n)}catch(t){if(this.unsubscribe(),bt.useDeprecatedSynchronousErrorHandling)throw t;i(t)}},n.prototype.__tryOrSetError=function(t,n,e){if(!bt.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,e)}catch(n){return bt.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=n,t.syncErrorThrown=!0,!0):(i(n),!0)}return!1},n.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},n}(St),jt="function"==typeof Symbol&&Symbol.observable||"@@observable",xt=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(n){var e=new t;return e.source=this,e.operator=n,e},t.prototype.subscribe=function(t,n,e){var r=this.operator,o=f(t,n,e);if(r?r.call(o,this.source):o.add(this.source||bt.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),bt.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(n){bt.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=n),h(t)?t.error(n):console.warn(n)}},t.prototype.forEach=function(t,n){var e=this;return new(n=b(n))(function(n,r){var o;o=e.subscribe(function(n){try{t(n)}catch(t){r(t),o&&o.unsubscribe()}},r,n)})},t.prototype._subscribe=function(t){var n=this.source;return n&&n.subscribe(t)},t.prototype[jt]=function(){return this},t.prototype.pipe=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return 0===t.length?this:d(t)(this)},t.prototype.toPromise=function(t){var n=this;return new(t=b(t))(function(t,e){var r;n.subscribe(function(t){return r=t},function(t){return e(t)},function(){return t(r)})})},t.create=function(n){return new t(n)},t}();y.prototype=Object.create(Error.prototype);var Tt=y,Ot=function(t){function n(n,e){var r=t.call(this)||this;return r.subject=n,r.subscriber=e,r.closed=!1,r}return r(n,t),n.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,n=t.observers;if(this.subject=null,n&&0!==n.length&&!t.isStopped&&!t.closed){var e=n.indexOf(this.subscriber);-1!==e&&n.splice(e,1)}}},n}(wt),Pt=function(t){function n(n){var e=t.call(this,n)||this;return e.destination=n,e}return r(n,t),n}(St),Ct=function(t){function n(){var n=t.call(this)||this;return n.observers=[],n.closed=!1,n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return r(n,t),n.prototype[gt]=function(){return new Pt(this)},n.prototype.lift=function(t){var n=new It(this,this);return n.operator=t,n},n.prototype.next=function(t){if(this.closed)throw new Tt;if(!this.isStopped)for(var n=this.observers,e=n.length,r=n.slice(),o=0;o<e;o++)r[o].next(t)},n.prototype.error=function(t){if(this.closed)throw new Tt;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var n=this.observers,e=n.length,r=n.slice(),o=0;o<e;o++)r[o].error(t);this.observers.length=0},n.prototype.complete=function(){if(this.closed)throw new Tt;this.isStopped=!0;for(var t=this.observers,n=t.length,e=t.slice(),r=0;r<n;r++)e[r].complete();this.observers.length=0},n.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},n.prototype._trySubscribe=function(n){if(this.closed)throw new Tt;return t.prototype._trySubscribe.call(this,n)},n.prototype._subscribe=function(t){if(this.closed)throw new Tt;return this.hasError?(t.error(this.thrownError),wt.EMPTY):this.isStopped?(t.complete(),wt.EMPTY):(this.observers.push(t),new Ot(this,t))},n.prototype.asObservable=function(){var t=new xt;return t.source=this,t},n.create=function(t,n){return new It(t,n)},n}(xt),It=function(t){function n(n,e){var r=t.call(this)||this;return r.destination=n,r.source=e,r}return r(n,t),n.prototype.next=function(t){var n=this.destination;n&&n.next&&n.next(t)},n.prototype.error=function(t){var n=this.destination;n&&n.error&&this.destination.error(t)},n.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},n.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):wt.EMPTY},n}(Ct),Nt=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,n){var e=this.connectable;e._refCount++;var r=new At(t,e),o=n.subscribe(r);return r.closed||(r.connection=e.connect()),o},t}(),At=function(t){function n(n,e){var r=t.call(this,n)||this;return r.connectable=e,r}return r(n,t),n.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var n=t._refCount;if(n<=0)this.connection=null;else if(t._refCount=n-1,n>1)this.connection=null;else{var e=this.connection,r=t._connection;this.connection=null,!r||e&&r!==e||r.unsubscribe()}}else this.connection=null},n}(St),Ht=function(t){function n(n,e){var r=t.call(this)||this;return r.source=n,r.subjectFactory=e,r._refCount=0,r._isComplete=!1,r}return r(n,t),n.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},n.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},n.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new wt).add(this.source.subscribe(new Dt(this.getSubject(),this))),t.closed?(this._connection=null,t=wt.EMPTY):this._connection=t),t},n.prototype.refCount=function(){return v()(this)},n}(xt).prototype,kt={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:Ht._subscribe},_isComplete:{value:Ht._isComplete,writable:!0},getSubject:{value:Ht.getSubject},connect:{value:Ht.connect},refCount:{value:Ht.refCount}},Dt=function(t){function n(n,e){var r=t.call(this,n)||this;return r.connectable=e,r}return r(n,t),n.prototype._error=function(n){this._unsubscribe(),t.prototype._error.call(this,n)},n.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},n.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var n=t._connection;t._refCount=0,t._subject=null,t._connection=null,n&&n.unsubscribe()}},n}(Pt),Rt=new xt(function(t){return t.complete()}),Mt=function(t){return function(n){for(var e=0,r=t.length;e<r&&!n.closed;e++)n.next(t[e]);n.closed||n.complete()}};T.prototype=Object.create(Error.prototype);var Vt=function(){function t(t,n){this.project=t,this.thisArg=n}return t.prototype.call=function(t,n){return n.subscribe(new Yt(t,this.project,this.thisArg))},t}(),Yt=function(t){function n(n,e,r){var o=t.call(this,n)||this;return o.project=e,o.count=0,o.thisArg=r||o,o}return r(n,t),n.prototype._next=function(t){var n;try{n=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(n)},n}(St),Ft=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return r(n,t),n.prototype.notifyNext=function(t,n,e,r,o){this.destination.next(n)},n.prototype.notifyError=function(t,n){this.destination.error(t)},n.prototype.notifyComplete=function(t){this.destination.complete()},n}(St),Ut=function(t){function n(n,e,r){var o=t.call(this)||this;return o.parent=n,o.outerValue=e,o.outerIndex=r,o.index=0,o}return r(n,t),n.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},n.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},n.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},n}(St),Wt=function(t){return function(n){return t.then(function(t){n.closed||(n.next(t),n.complete())},function(t){return n.error(t)}).then(null,i),n}},Lt=function(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}(),Gt=function(t){return function(n){for(var e=t[Lt]();;){var r=e.next();if(r.done){n.complete();break}if(n.next(r.value),n.closed)break}return"function"==typeof e.return&&n.add(function(){e.return&&e.return()}),n}},zt=function(t){return function(n){var e=t[jt]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(n)}},Jt=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t},Xt=function(t){if(t instanceof xt)return function(n){return t._isScalar?(n.next(t.value),void n.complete()):t.subscribe(n)};if(t&&"function"==typeof t[jt])return zt(t);if(Jt(t))return Mt(t);if(P(t))return Wt(t);if(t&&"function"==typeof t[Lt])return Gt(t);var n="You provided "+(s(t)?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";throw new TypeError(n)},Kt={},qt=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,n){return n.subscribe(new Bt(t,this.resultSelector))},t}(),Bt=function(t){function n(n,e){var r=t.call(this,n)||this;return r.resultSelector=e,r.active=0,r.values=[],r.observables=[],r}return r(n,t),n.prototype._next=function(t){this.values.push(Kt),this.observables.push(t)},n.prototype._complete=function(){var t=this.observables,n=t.length;if(0===n)this.destination.complete();else{this.active=n,this.toRespond=n;for(var e=0;e<n;e++){var r=t[e];this.add(C(this,r,r,e))}}},n.prototype.notifyComplete=function(t){0==(this.active-=1)&&this.destination.complete()},n.prototype.notifyNext=function(t,n,e,r,o){var i=this.values,s=i[e],u=this.toRespond?s===Kt?--this.toRespond:this.toRespond:0;i[e]=n,0===u&&(this.resultSelector?this._tryResultSelector(i):this.destination.next(i.slice()))},n.prototype._tryResultSelector=function(t){var n;try{n=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(n)},n}(Ft),Qt=function(){function t(t,n){void 0===n&&(n=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=n}return t.prototype.call=function(t,n){return n.subscribe(new $t(t,this.project,this.concurrent))},t}(),$t=function(t){function n(n,e,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var o=t.call(this,n)||this;return o.project=e,o.concurrent=r,o.hasCompleted=!1,o.buffer=[],o.active=0,o.index=0,o}return r(n,t),n.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},n.prototype._tryNext=function(t){var n,e=this.index++;try{n=this.project(t,e)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(n,t,e)},n.prototype._innerSub=function(t,n,e){var r=new Ut(this,void 0,void 0);this.destination.add(r),C(this,t,n,e,r)},n.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},n.prototype.notifyNext=function(t,n,e,r,o){this.destination.next(n)},n.prototype.notifyComplete=function(t){var n=this.buffer;this.remove(t),this.active--,n.length>0?this._next(n.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},n}(Ft),Zt=function(){return(Zt=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++){n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t}).apply(this,arguments)},tn=/\[object ([^\]]+)\]/,nn=function(t){return t?Object.prototype.toString.call(t).match(tn)[1]:"null"},en="__RMVI_STATE_ENTITY__",rn=function(){function t(){}return t.genNextId=function(){return this.id++},t.id=0,t}(),on=function(){function t(t){this.streamCollection=t}return t.prototype.for=function(t){return this.streamCollection.hasWithoutGlobal(t)?this.streamCollection.getWithoutGlobal(t):this.streamCollection.add(t)},t}(),sn=function(){function t(t){void 0===t&&(t={}),this.subjectMap=t}return t.prototype.hasWithoutGlobal=function(t){return!!this.subjectMap[t]},t.prototype.has=function(t){return this.get(t).length>0},t.prototype.getWithoutGlobal=function(t){return this.subjectMap[t]?this.subjectMap[t]:null},t.prototype.get=function(t,n){var e=this;void 0===n&&(n=!1);var r=[],o=t.split("::"),i=o[0],s=["*::"+o[1],i+"::*"].filter(function(t){return!!e.subjectMap[t]}).map(function(t){return e.subjectMap[t]});return this.subjectMap[t]?r.push(this.subjectMap[t]):n&&r.push(this.add(t)),s.length?r.concat(s):r},t.prototype.add=function(t){return this.subjectMap[t]=new Ct},t}(),un=function(){function t(t,n,e,r,o){this.method=t,this.context=n,this.args=e,this.contextName=r,this.propertyKey=o}return t.prototype.proceed=function(){return this.method.apply(this.context,this.args)},t.prototype.getArguments=function(){return this.args},t.prototype.getContext=function(){return this.context},t.prototype.getInstanceName=function(){return this.contextName},t.prototype.getPropertyName=function(){return this.propertyKey},t.prototype.getFullQualifiedName=function(){return this.getInstanceName()+"."+this.getPropertyName()},t}(),cn=function(){return(cn=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++){n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t}).apply(this,arguments)},an={},pn=function(){function t(t,n){void 0===t&&(t={}),void 0===n&&(n={});var e=this;this.store=new sn,this.advices=t,this.cutPoints=n,this.handlerResponse=new on(this.store),J(t,function(t,r){var o=n[r];if(!(o=q(o)?o:[o]))throw new Error("Cut point "+r+" does not exists");o.forEach(function(n){if("function"!=typeof e[n])throw new Error("Advice only applyable to Function.");var r=e[n];e[n]=function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];var s=new un(function(){return r.apply(e,o)},e,o,e.constructor.displayName||e.constructor.name,n);return t.invoke?t.invoke(s,e.intent):t(s,e.intent)}})})}return t.prototype.setState=function(t){this.state=t},t.prototype.setIntent=function(t){this.intentHandler=t},t.prototype.setSubject=function(t){this.subject=t},Object.defineProperty(t.prototype,"intent",{get:function(){return this.intentHandler},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"response",{get:function(){return this.handlerResponse},enumerable:!0,configurable:!0}),t.prototype.callback=function(t,n){var e=this;return function(r){return e.push(t,void 0!==n?n:r)}},t}(),hn=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),fn=function(t){function n(n){var e=t.call(this)||this;return e.history=[],e.children=[],e.prepare(n),e}return hn(n,t),n.prototype.addChild=function(t){this.children.push(t)},n.prototype.removeChild=function(t){var n=this.children.indexOf(t);n>-1&&this.children.splice(n,1)},n.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),this.children=[],this.parent=null},n.prototype.prepare=function(t){this.parent=t,this.parent&&this.parent.addChild(this)},n.prototype.subscribe=function(t){return new wt},n.prototype.clone=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return this},n.prototype.push=function(t,n){var e=this;if("RETRY"!==t){var r=this.findSubjects(t);if(r.length){var o=function(){r.forEach(function(t){return t.next({data:n,state:e.state})})};return this.history.push({fire:o,key:t}),this.history.length>10&&this.history.shift(),o(),Promise.resolve()}}else{var i=n?this.findHistory(n):this.history[this.history.length-1];i&&i.fire()}},n.prototype.getStreamStore=function(){return this.store},n.prototype.callback=function(t,n){var e=this;return function(r){return e.push(t,L(n)?n:r)}},n.prototype.findSubjects=function(t){var n=this.store.get(t);return this.parent&&(n=n.concat(this.findParentSubjects(t,!1))),this.children.length&&(n=n.concat(this.findChildrenSubjects(t,!1))),n},n.prototype.findParentSubjects=function(t,n){void 0===n&&(n=!0);var e=n?this.store.get(t):[];return this.parent?e.concat(this.parent.findParentSubjects(t)):e},n.prototype.findChildrenSubjects=function(t,n){void 0===n&&(n=!0);var e=n?this.store.get(t):[];return this.children.length?this.children.reduce(function(n,r){return e.concat(r.findChildrenSubjects(t))},e):e},n.prototype.findHistory=function(t){var n=this.history.filter(function(n){return n.key===t})[0];return!n&&this.parent&&(n=this.findParentHistory(t,!1)),!n&&this.children.length&&(n=this.findChildrenHistory(t,!1)),n},n.prototype.findParentHistory=function(t,n){void 0===n&&(n=!0);var e=n?this.history.filter(function(n){return n.key===t})[0]:null;return!e&&this.parent?this.parent.findParentHistory(t):e},n.prototype.findChildrenHistory=function(t,n){void 0===n&&(n=!0);var e=n?this.history.filter(function(n){return n.key===t})[0]:null;if(!e&&this.children.length){var r;return this.children.some(function(n){return!!(r=n.findChildrenHistory(t))}),r}return e},n}(pn),ln=function(){function t(t,n){this.subjectFactory=t,this.selector=n}return t.prototype.call=function(t,n){var e=this.selector,r=this.subjectFactory(),o=e(r).subscribe(t);return o.add(n.subscribe(r)),o},t}(),dn=Array.isArray,bn=function(){function t(){this.code="const template = ",this.observables=[],this.values=[],this.id=0}return t.prototype.collect=function(t,n){var e=this;if(void 0===n&&(n=!1),t instanceof xt)return t;if(!dn(Object)&&!ot(t))throw new Error("Invalid object passed to combineTemplate");return this.doCollect(t),this.initInjector(),this.observables.length?I.apply(void 0,this.observables.map(function(t){var e=t.observable,r={},o=r;return e.subscribe(function(t){return o=t}).unsubscribe(),o===r&&n?e.pipe(rt(null)):e})).pipe(O(function(t){var n={};return t.forEach(function(t,r){n[e.observables[r].key]=t}),e.values.forEach(function(t){var e=t.key,r=t.value;return n[e]=r}),e.injector(n)})):E(t)},t.prototype.doCollect=function(t){var n=this;if(ot(t)){this.code+="{";for(var e in t){var r=JSON.stringify(e);t[e]instanceof xt?(this.code+=r+": values["+ ++this.id+"]",this.observables.push({observable:t[e],key:String(this.id)})):(this.code+=r+": ",this.doCollect(t[e])),this.code+=","}this.sliceComma(),this.code+="}"}else dn(t)?(this.code+="[",t.forEach(function(t,e){t instanceof xt?(n.code+="values["+ ++n.id+"]",n.observables.push({observable:t,key:String(n.id)})):n.doCollect(t),n.code+=","}),this.sliceComma(),this.code+="]"):(this.code+="values["+ ++this.id+"]",this.values.push({value:t,key:String(this.id)}))},t.prototype.sliceComma=function(){","===this.code.charAt(this.code.length-1)&&(this.code=this.code.slice(0,this.code.length-1))},t.prototype.initInjector=function(){this.code+="\n;return template;",this.injector=Function("values",this.code)},t}(),yn=function(){return(yn=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++){n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t}).apply(this,arguments)},vn=function(){function t(t,n){this.devTools=t,this.parent=n,this.children=[],this.subject=new Ct,this.state={view:{}},this.preservation=[],this.shouldImmediateDispatch=!0,this.lastDispatched=null,this.histories=[],this.devtoolsEnabled=!0,this.parent&&this.parent.addChild(this)}return t.prototype.setState=function(t){this.state=t},t.prototype.addChild=function(t){this.children.push(t)},t.prototype.notify=function(t){if(this.shouldImmediateDispatch=!1,"RETRY"!==t.type)this.doNotify(this.createSubjectPayload(t));else{var n=t.payload?this.findHistory(t.payload):this.histories[this.histories.length-1];n&&this.doNotify(n)}},t.prototype.prepare=function(t){this.parent=t},Object.defineProperty(t.prototype,"observable",{get:function(){return this.subject.pipe(et())},enumerable:!0,configurable:!0}),t.prototype.getLastDispatched=function(){return this.lastDispatched},t.prototype.suspendDevtools=function(){this.devtoolsEnabled=!1},t.prototype.resumeDevtools=function(){this.devtoolsEnabled=!0},t.prototype.doNotify=function(t){var n=this;if(this.devtoolsEnabled){var e={type:t.type,payload:t.payload};this.devTools.send(e,yn({},this.state.view,{__payload__:e}))}if(this.histories.push(t),this.histories.length>=10&&this.histories.shift(),this.lastDispatched=t,this.subject.next(t),this.children.forEach(function(n){return n.notify({type:t.type,payload:t.payload})}),this.preservation.length){var r=this.preservation.slice();this.preservation.length=0,r.forEach(function(t){return n.notify(t)})}this.shouldImmediateDispatch=!0},t.prototype.findHistory=function(t){var n=this.histories.filter(function(n){return n.type===t})[0]||null;return!n&&this.children.length&&this.children.some(function(e){return!!(n=e.findHistory(t))}),n},t.prototype.createSubjectPayload=function(t){var n=this;return yn({},t,{states:this.state.view,dispatch:function(t,e){n.shouldImmediateDispatch?n.notify({type:t,payload:e}):n.preservation.push({type:t,payload:e})}})},t}(),mn=function(){function t(){}return t.prototype.init=function(t){},t.prototype.send=function(t,n){},t.prototype.subscribe=function(t){return function(){}},t}(),_n={},wn=function(t,n,e,r){return new(e||(e=Promise))(function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function u(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new e(function(n){n(t.value)}).then(s,u)}c((r=r.apply(t,n||[])).next())})},gn=function(t,n){function e(t){return function(n){return r([t,n])}}function r(e){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return c.label++,{value:e[1],done:!1};case 5:c.label++,i=e[1],e=[0];continue;case 7:e=c.ops.pop(),c.trys.pop();continue;default:if(s=c.trys,!(s=s.length>0&&s[s.length-1])&&(6===e[0]||2===e[0])){c=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){c.label=e[1];break}if(6===e[0]&&c.label<s[1]){c.label=s[1],s=e;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(e);break}s[2]&&c.ops.pop(),c.trys.pop();continue}e=n.call(t,c)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}var o,i,s,u,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return u={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u},Sn=function(t){return!!t&&!!t.then},En=function(t){return!!t&&!!t.aggregate},jn=function(){function t(){this._isLocked=!1,this.buffer=[]}return t.prototype.try=function(t){return wn(this,void 0,void 0,function(){return gn(this,function(n){return this._isLocked?this.buffer.push(t):this.run(t),[2]})})},t.prototype.drain=function(){return wn(this,void 0,void 0,function(){var t;return gn(this,function(n){return this._isLocked=!1,(t=this.buffer.shift())&&this.run(t),[2]})})},t.prototype.run=function(t){return wn(this,void 0,void 0,function(){return gn(this,function(n){switch(n.label){case 0:return this._isLocked=!0,[4,t()];case 1:return n.sent(),[4,this.drain()];case 2:return n.sent(),[2]}})})},t}();(t.SystemEvent||(t.SystemEvent={})).REPLACE_STATE="@System::replace-state";var xn=function(){return(xn=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++){n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t}).apply(this,arguments)},Tn=function(){function t(t,n,e,r){this.intent=t,this.stores=n,this.service=e,this.subject=r,this.storeInstances=[]}return t.prototype.initialize=function(){var t=this;return this.stores.reduce(function(n,e){var r=new e(t.intent,t.service,t.subject.observable),o=r.initialize();t.storeInstances.push(r),o.view&&(n.view=$(n.view,o.view));for(var i in o)if("view"!==i){if(!(o[i]&&o[i]instanceof xt))throw new Error("Property "+i+" must be Observable.");n[i]?n[i]=n[i].merge(o[i]):n[i]=o[i]}return n},{view:{}})},t.prototype.getStores=function(){return this.storeInstances},t}(),On=function(){function n(t,n,e,r,o,i,s,u){void 0===o&&(o=function(t,n){return n}),void 0===i&&(i={}),void 0===s&&(s={}),void 0===u&&(u=function(t){return t});var c=this;this.name=t,this.context=n,this.intentConstructors=e,this.storeConstructors=r,this.stateFactory=o,this.service=i,this.stateHandlers=s,this.intentAdvice=u,this.isDisposed=!1,this.handlerSubscriptions=[],this.subscribers=[],this.handlers={},this.devToolsSubscribers=[],this.cache=null,this.context.provisioning?J(Z(),function(t,n){c.handlers[n]=t.clone()}):this.handlers=Z(),this.stateHandlers&&J(this.stateHandlers,function(t,n){c.handlers[n]=t}),this.devTools=ct({name:this.name,instanceId:this.name})}return n.prototype.dispose=function(t){void 0===t&&(t=!0),this.isDisposed=!0,this.subscription.unsubscribe(),this.subscription=null,this.intent.dispose(),this.handlerSubscriptions.forEach(function(t){return t.unsubscribe()}),this.devToolsSubscribers.forEach(function(t){return t()}),t&&(this.cache=null)},n.prototype.prepare=function(){var n=this;if(this.isDisposed?(this.intent.prepare(this.context.__intent),this.subject.prepare(this.context.__subject)):this.intent||(this.intent=new fn(this.context.__intent),this.subject=new vn(this.devTools,this.context.__subject)),!this.cache){this.cache={};var e={};for(var r in this.intentConstructors)e[r]=this.intentAdvice(new this.intentConstructors[r](function(t,e){n.subject.notify({type:t,payload:e}),n.intent.push(t,e)},xn({intent:this.intent.response},Q(this.handlers,function(t){return t.response}))));this.cache.intentInstance=e;var o=this.cache.storeGroup=new Tn(e,this.storeConstructors,this.service,this.subject);this.cache.intentHandler=st(this.intent,this.subject);this.cache.storeState=this.stateFactory(this.subject.observable,o.initialize()),this.cache.stores=o.getStores()}if(J(this.handlers,function(t){t.setIntent(n.cache.intentHandler),t.setSubject(n.subject)}),this.isDisposed||!this.subscription){var i=xn({},this.cache.storeState);this.subscribeHandler(i),this.subscription=it(i).subscribe(function(t){if(n.context&&n.context.provisioning){var e=n.context.provisioning.getState();for(var r in e)t[r]?t[r]=$(e[r],t[r]):t[r]=e[r]}n.notifyUpdate(t)},function(t){console.error(t)}),this.devToolsSubscribers.push(this.devTools.subscribe(function(e){if("DISPATCH"===e.type&&"JUMP_TO_STATE"===e.payload.type){var r=JSON.parse(e.state);n.notifyUpdateView(r),n.subject.suspendDevtools(),n.subject.notify({type:t.SystemEvent.REPLACE_STATE,payload:{state:r}}),n.subject.notify(r.__payload__),n.subject.resumeDevtools()}}))}this.isDisposed=!1},n.prototype.getStores=function(){return this.cache.storeGroup.getStores()},n.prototype.getState=function(){return this.state},n.prototype.getIntentHandler=function(){return this.cache.intentHandler},n.prototype.getIntentInstance=function(){return this.cache.intentInstance},n.prototype.getIntent=function(){return this.intent},n.prototype.getSubject=function(){return this.subject},n.prototype.subscribe=function(t,n){var e=this;return void 0===n&&(n=!1),this.subscribers.push(t),n&&t(this.state),function(){var n=-1;e.subscribers.some(function(e,r){return e===t&&(n=r,!0)}),e.subscribers.splice(n,1)}},n.prototype.getHandlers=function(){return this.handlers},n.prototype.subscribeHandler=function(t){for(var n in this.handlers)this.handlerSubscriptions.push(this.handlers[n].subscribe(t))},n.prototype.notifyUpdate=function(t){this.state=t,this.subject.setState(t),this.intent.setState(t),J(this.handlers,function(n){return n.setState(t)}),this.subscribers.forEach(function(n){return n(t)})},n.prototype.notifyUpdateView=function(t){var n=this;this.state.view=t,this.subject.setState(this.state),this.intent.setState(this.state),J(this.handlers,function(t){return t.setState(n.state)}),this.subscribers.forEach(function(t){return t(n.state)})},n}(),Pn=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Cn=function(){return(Cn=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++){n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t}).apply(this,arguments)},In=function(t){function r(e,o){var i=t.call(this,e,o)||this;i.provisioning=new On(i.props.name||"Anonymouse#"+rn.genNextId(),i.context,i.props.intent?X(i.props.intent)?i.props.intent:{intent:i.props.intent}:{},i.props.store?Array.isArray(i.props.store)?i.props.store:[i.props.store]:[],i.props.app,i.props.service,i.props.stateHandlers||{});var s=i,u=s.provisioning,c=s.context;s.props;return i.ProviderComponent=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Pn(n,t),n.prototype.render=function(){return this.props.children},n.prototype.getChildContext=function(){return{provisioning:u,intent:u.getIntentHandler(),state:u.getState(),parent:c,__intent:u.getIntent(),__subject:u.getSubject()}},Object.defineProperty(n,"childContextTypes",{get:function(){return r.contextTypes},enumerable:!0,configurable:!0}),n}(n.Component),i.state={prepared:!1},i}return Pn(r,t),r.prototype.render=function(){return this.state.prepared?n.createElement(this.ProviderComponent,null,n.cloneElement(this.props.children)):null},r.prototype.componentDidMount=function(){this.provisioning.prepare(),this.setState({prepared:!0})},r.prototype.componentWillUnmount=function(){this.provisioning.dispose(!this.props.useCache),this.setState({prepared:!1})},r.contextTypes={provisioning:e.any,intent:e.any,state:e.any,parent:e.any,__subject:e.any,__intent:e.any},r}(n.Component),Nn=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),An=function(){return(An=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++){n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t}).apply(this,arguments)},Hn={mapStateToProps:void 0,mapIntentToProps:void 0},kn={intent:e.any,state:e.any,unobservablifiedStateGetter:e.any,parent:e.any},Dn=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Rn=W("@@reactMVIStore"),Mn=function(t,n,e,r){return new(e||(e=Promise))(function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function u(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new e(function(n){n(t.value)}).then(s,u)}c((r=r.apply(t,n||[])).next())})},Vn=function(t,n){function e(t){return function(n){return r([t,n])}}function r(e){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return c.label++,{value:e[1],done:!1};case 5:c.label++,i=e[1],e=[0];continue;case 7:e=c.ops.pop(),c.trys.pop();continue;default:if(s=c.trys,!(s=s.length>0&&s[s.length-1])&&(6===e[0]||2===e[0])){c=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){c.label=e[1];break}if(6===e[0]&&c.label<s[1]){c.label=s[1],s=e;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(e);break}s[2]&&c.ops.pop(),c.trys.pop();continue}e=n.call(t,c)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}var o,i,s,u,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return u={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u},Yn=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Fn=function(){return(Fn=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++){n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t}).apply(this,arguments)};return t.Provider=In,t.directConnect=function(t){return function(e){function r(){var t=null!==e&&e.apply(this,arguments)||this;return t.subject=new Ct,t.subscriptions=new wt,t}return Pn(r,e),r.prototype.render=function(){var e=this;return n.createElement(In,{store:[this.store],intent:function(){},app:this.props.app?this.props.app:void 0,stateHandlers:this.props.stateHandlers},n.createElement(t,Cn({},this.props.props,{ref:function(t){return t&&(e.reference=t)}})))},r.prototype.componentWillMount=function(){var t=this,n=this,e=n.props;n.subject,n.subscriptions,this.store=function(){function n(t,n,e){this.intent=t,this.services=n,this.subject=e}return n.prototype.initialize=function(){var n={};for(var r in e.state)!function(r){var o=e.state[r];n[r]=t.subject.pipe(O(function(t){return t[r]}),rt(o))}(r);var o=t.props.handlers||[];return t.subscriptions.add(this.subject.subscribe(function(t){o.forEach(function(n){n[t.type]&&n[t.type](t)})})),{view:n}},n}()},Object.defineProperty(r.prototype,"component",{get:function(){return this.reference},enumerable:!0,configurable:!0}),r.prototype.componentWillReceiveProps=function(t){this.subject.next(t.state)},r.prototype.componentWillUnmount=function(){this.subscriptions.unsubscribe(),this.subscriptions=new wt},r}(n.Component)},t.CONTEXT_TYPES=kn,t.connect=function(t){void 0===t&&(t=Hn);var r=t.mapStateToProps,o=void 0===r?function(t,n,e){return An({},t,n)}:r,i=t.mapIntentToProps,s=void 0===i?function(t,n,e,r){return{}}:i;return function(t){var r,i;t.contextTypes=kn;var u=(t.name||t.displayName||"AnonymousComponent")+"$EnhancedReactMVIContextConnectorComponent",c=(r=function(e){function r(t,n){var r=e.call(this,t,n)||this;return r.mappedProps=$(r.mapStateToProps(r.props),r.mapIntentToProps(r.props)),r}return Nn(r,e),r.prototype.render=function(){return n.createElement(t,An({},this.mappedProps))},r.prototype.componentWillReceiveProps=function(t){this.mappedProps=$(this.mapStateToProps(t),this.mapIntentToProps(t))},r.prototype.getChildContext=function(){return{intent:this.context.intent,state:this.context.state,parent:this.context.parent}},r.prototype.mapIntentToProps=function(t){return s(this.context.intent,t.state,t.props,this)},r.prototype.mapStateToProps=function(t){return o(t.state,t.props,this)},Object.defineProperty(r,"childContextTypes",{get:function(){return kn},enumerable:!0,configurable:!0}),r}(n.Component),r.displayName=u,r.contextTypes=kn,r);return i=function(t){function e(n){var e=t.call(this,n)||this;return e.state={state:null},e}return Nn(e,t),e.prototype.render=function(){return n.createElement(c,{state:this.state.state,props:this.props})},e.prototype.componentWillMount=function(){var t=this;this.unsubscribe=this.context.provisioning.subscribe(function(n){t.setState({state:n.view})},!0)},e.prototype.componentWillUnmount=function(){this.unsubscribe()},e}(n.Component),i.contextTypes={provisioning:e.any},i}},t.view=function(t,e){var r;return r=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return Dn(r,n),r.prototype.render=function(){return t(this.props,this.context)},Object.defineProperty(r,"displayName",{get:function(){return e||"StatelessView"},enumerable:!0,configurable:!0}),r}(n.Component),r.contextTypes=kn,r},t.context=function(t){return t.contextTypes=kn,t},t.STORE_SYMBOL=Rn,t.store=function(t){function n(n,e,r){G(this,n),G(this,{subject:r}),e&&G(this,e),t.call(this,n)}return n[Rn]=!0,n.prototype=t.prototype,n},t.combineAdvice=function(){function t(t,n,e){return"function"!=typeof t?t.invoke(n,e):t(n,e)}for(var n=this,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return function(r,o){return Mn(n,void 0,void 0,function(){var n,i,s=this;return Vn(this,function(u){switch(u.label){case 0:return n=function(e,i){return Mn(s,void 0,void 0,function(){var s=this;return Vn(this,function(u){switch(u.label){case 0:return e?[4,t(e,new un(function(){return Mn(s,void 0,void 0,function(){return Vn(this,function(t){return[2,n(i.shift(),i)]})})},r.getContext(),r.getArguments(),r.getInstanceName(),r.getPropertyName()),o)]:[3,2];case 1:return[2,u.sent()];case 2:return[2,r.proceed()]}})})},i=e.slice(),[4,n(i.shift(),i)];case 1:return[2,u.sent()]}})})}},t.getHandlers=Z,t.registerHandlers=function(t){var n="";if(!B(t,function(t,e){var r=t instanceof pn;return r||(n=e),r}))throw new Error(n+" is not valid state handler.");return Q(an=cn({},an,t),function(t,n){return t.response})},t.removeHandler=function(t){an=z(an,t)},t.StateHandler=pn,t.HandlerResponse=on,t.StreamStore=sn,t.MethodInvocation=un,t.intent=function(t){function n(n,e){this.dispatch=n;for(var r in e)this[r]=e[r];t.call(this,e)}return n.prototype=t.prototype,n},t.Intent=fn,t.generateIntentHandler=st,t.symbol=W,t.isDefined=L,t.assign=function(t,n){return Zt({},t,n)},t.extend=G,t.omit=z,t.forIn=J,t.isObject=X,t.STATE_ENTITY=en,t.isSimpleObject=K,t.isArray=q,t.isRegExp=function(t){return"RegExp"===nn(t)},t.filter=function(t,n){if(q(t))return t.filter(n);var e=[];for(var r in t||{})n(t[r],r,t)&&e.push(t[r]);return e},t.map=function(t,n){if(q(t))return t.map(n);var e=[];for(var r in t||{})e.push(n(t[r],r,t));return e},t.some=function(t,n){if(q(t))return t.some(n);if(X(t))for(var e in t||{})if(n(t[e],e,t))return!0;return!1},t.every=B,t.mapValues=Q,t.clone=function(t){return X(t)?Zt({},t):q(t)?t.slice():t},t.mergeDeep=$,t.IDGenerator=rn,t.Provisioning=On,t.combineTemplate=it,t.flatScan=pt,t.reducer=function(n,e,r,o){return n.pipe(pt(function(n,r){return r.type===t.SystemEvent.REPLACE_STATE?r.payload.state:e(n,r)},r,o))},t.SubjectTree=vn,t.makeView=function(t,e){return function(r,o){void 0===o&&(o={});var i=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return Yn(i,e),i.prototype.render=function(){var e,i=this.props,s="function"==typeof t?(e=(t.displayName||t.name||ht())+"#"+rn.genNextId(),n.createElement(t,Fn({},i))):(e="function"==typeof t.type?(t.type.displayName||t.type.name||ht())+"#"+rn.genNextId():ht(),n.cloneElement(t,Fn({},t.props,i),i.children));return n.createElement(In,Fn({app:r,name:e},o),s)},i}(n.Component);return e?e(i):i}},t.makeApp=function(n){return function(e){return function(r,o){return void 0===o&&(o={}),Object.keys(n).reduce(function(o,i){var s=(0,n[i])(r.pipe(O(function(n){return n.type===t.SystemEvent.REPLACE_STATE?Fn({},n,{payload:{state:n.payload.states[i]}}):n})),e[i]);if(s.view){if(!x(s.view))throw new Error("Application view of "+i+" must be Observable.");s.view=s.view.pipe(rt(e[i])),o.view||(o.view={}),L(o.view[i])?o.view[i]=U(o.view[i],s.view):o.view[i]=s.view}for(var u in s)if("view"!==u){if(!(s[u]&&s[u]instanceof xt))throw new Error("Property "+u+" must be Observable.");o[u]?o[u]=U(o[u],s[u]):o[u]=s[u]}return o},o)}}},t}({},React,PropTypes);
